# Example local preset (copy/rename before editing).
#
# This is a full run config for an edited (quant_rtn) run and is meant to be
# paired against a baseline report via `invarlock run --baseline ...`.

model:
  id: "sshleifer/tiny-gpt2"
  adapter: "hf_causal"
  device: "auto"

dataset:
  provider: "wikitext2"
  split: "validation"
  seq_len: 512
  stride: 512
  preview_n: 64
  final_n: 64
  seed: 42

eval:
  metric:
    kind: "ppl_causal"
  loss:
    type: "causal"

edit:
  name: "quant_rtn"
  plan:
    bitwidth: 8
    per_channel: true
    group_size: 128
    clamp_ratio: 0.005
    scope: "attn"
    max_modules: 12
    seed: 42

auto:
  enabled: true
  tier: "balanced"
  probes: 0

guards:
  order: ["invariants", "spectral", "rmt", "variance", "invariants"]
  # Example: override spectral caps locally (copy from `configs/overrides/...`)
  spectral:
    max_spectral_norm: null

output:
  dir: "runs"
  save_model: false
  save_report: true
